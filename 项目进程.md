【3D视图光标锁定功能开发计划】

1. 需求：为3D视图添加光标锁定功能，提升右键拖动视角时的操作体验。
2. 主要涉及文件：
   - common/src/ui/CameraTool3D.h
   - common/src/ui/CameraTool3D.cpp
   - （可选）common/src/ui/MapView3D.cpp
3. 主要改动点：
   - 在CameraTool3D中增加光标锁定状态成员变量。
   - 在acceptMouseDrag中激活光标锁定，在mouseUp或拖动结束时解除锁定。
   - 如需处理窗口失焦，需在MapView3D的focusOutEvent中调用解锁逻辑。
4. 技术细节：
   - 使用Qt相关API（如grabMouse/releaseMouse、setOverrideCursor、QCursor::setPos等）实现光标锁定与隐藏。
   - 注意跨平台兼容性，优先保证Windows下体验。

【3D视图光标锁定功能Qt实现技术细节补充】

1. 鼠标捕获与锁定
   - Qt 6 推荐：windowHandle()->setMouseGrabEnabled(true/false) 实现鼠标捕获与释放。
   - Qt Widgets 兼容：grabMouse()/releaseMouse()。

2. 光标隐藏与恢复
   - 捕获时 setCursor(Qt::BlankCursor) 隐藏光标。
   - 释放时 unsetCursor() 恢复光标。

3. 相对移动与重置中心
   - mouseMoveEvent 中：
     - 计算 QPoint delta = mapFromGlobal(QCursor::pos()) - rect().center();
     - 用 delta 控制相机旋转。
     - QCursor::setPos(mapToGlobal(rect().center())) 重置物理光标到中心。

4. 集成建议
   - 在 CameraTool3D::acceptMouseDrag 右键拖动时激活锁定，mouseUp 或拖动结束时解除。
   - MapView3D::focusOutEvent 失焦时自动解除锁定。
   - 优先用 Qt 6 API，兼容老版本。

5. 伪代码示例
   - 见本条记录上方详细说明。
